# RatTree
Stern Brocot Tree
Minkowski's question-mark function
From Wikipedia, the free encyclopedia
Jump to navigationJump to search

This article includes a list of general references, but it lacks sufficient corresponding inline citations. Please help to improve this article by introducing more precise citations. (April 2013) (Learn how and when to remove this template message)

Minkowski question-mark function.

Left: ?(x). Right: ?(x) − x.
In mathematics, the Minkowski question-mark function, denoted ?(x), is a function with unusual fractal properties, defined by Hermann Minkowski in 1904.[1] It maps quadratic irrational numbers to rational numbers on the unit interval, via an expression relating the continued fraction expansions of the quadratics to the binary expansions of the rationals, given by Arnaud Denjoy in 1938.[2] It also maps rational numbers to dyadic rationals, as can be seen by a recursive definition closely related to the Stern–Brocot tree.


Contents
1	Definition and intuition
2	Self-symmetry
3	Quadratic irrationals
3.1	Dyadic symmetry
3.2	Isomorphism
3.3	Periodic orbits of the dyadic transform
3.4	Periodic orbits as continued fractions
4	Properties of ?(x)
5	Algorithm
6	Probability distribution
7	See also
8	References
8.1	Notes
8.2	Historical sources
8.3	Bibliography
8.4	Further reading
9	External links
Definition and intuition
One way to define the question-mark function involves the correspondence between two different ways of representing fractional numbers using finite or infinite binary sequences. Most familiarly, a string of 0's and 1's with a single point mark ".", like "11.001001000011111..." can be interpreted as the binary representation of a number. In this case this number is

{\displaystyle 2+1+{\frac {1}{8}}+{\frac {1}{64}}+\cdots =\pi .}{\displaystyle 2+1+{\frac {1}{8}}+{\frac {1}{64}}+\cdots =\pi .}
There is a different way of interpreting the same sequence, however, using continued fractions. Interpreting the part before the point mark as a binary number in the same way, replace each consecutive block of 0's or 1's after the point by its run length, in this case generating the sequence {\displaystyle [3;2,1,2,1,4,5,\dots ]}{\displaystyle [3;2,1,2,1,4,5,\dots ]}. Then, use this sequence as the coefficients of a continued fraction:[3][4]
{\displaystyle 3+{\frac {1}{\displaystyle 2+{\frac {1}{\displaystyle 1+{\frac {1}{\displaystyle 2+{\frac {1}{\displaystyle 1+{\frac {1}{\displaystyle 4+{\frac {1}{\displaystyle 5+\dots }}}}}}}}}}}}\approx 3.365}{\displaystyle 3+{\frac {1}{\displaystyle 2+{\frac {1}{\displaystyle 1+{\frac {1}{\displaystyle 2+{\frac {1}{\displaystyle 1+{\frac {1}{\displaystyle 4+{\frac {1}{\displaystyle 5+\dots }}}}}}}}}}}}\approx 3.365}
The question-mark function reverses this process: it translates the continued-fraction of a given real number into a run-length encoded binary sequence, and then reinterprets that sequence as a binary number.[3][4] For instance, for the example above, {\displaystyle \operatorname {?} (3.365\dots )=\pi }{\displaystyle \operatorname {?} (3.365\dots )=\pi }. To define this formally, if an irrational number {\displaystyle x}x has the (non-terminating) continued-fraction representation

{\displaystyle x=a_{0}+{\frac {1}{\displaystyle a_{1}+{\frac {1}{\displaystyle a_{2}+\cdots }}}}=[a_{0};a_{1},a_{2},\dots ]}{\displaystyle x=a_{0}+{\frac {1}{\displaystyle a_{1}+{\frac {1}{\displaystyle a_{2}+\cdots }}}}=[a_{0};a_{1},a_{2},\dots ]}
then the value of the question-mark function on {\displaystyle x}x is defined as the value of the infinite series
{\displaystyle \operatorname {?} (x)=a_{0}+2\sum _{n=1}^{\infty }{\frac {\left(-1\right)^{n+1}}{2^{a_{1}+\cdots +a_{n}}}}.}{\displaystyle \operatorname {?} (x)=a_{0}+2\sum _{n=1}^{\infty }{\frac {\left(-1\right)^{n+1}}{2^{a_{1}+\cdots +a_{n}}}}.}
In the same way, if a rational number {\displaystyle x}x has the terminating continued-fraction representation {\displaystyle [a_{0};a_{1},a_{2},\dots ,a_{m}]}{\displaystyle [a_{0};a_{1},a_{2},\dots ,a_{m}]} then the value of the question-mark function on {\displaystyle x}x is a finite sum,
{\displaystyle \operatorname {?} (x)=a_{0}+2\sum _{n=1}^{m}{\frac {\left(-1\right)^{n+1}}{2^{a_{1}+\cdots +a_{n}}}}.}{\displaystyle \operatorname {?} (x)=a_{0}+2\sum _{n=1}^{m}{\frac {\left(-1\right)^{n+1}}{2^{a_{1}+\cdots +a_{n}}}}.}
Analogously to the way the question-mark function reinterprets continued fractions as binary numbers, the Cantor function can be understood as reinterpreting ternary numbers as binary numbers.

Self-symmetry
The question mark is clearly visually self-similar. A monoid of self-similarities may be generated by two operators S and R acting on the unit square and defined as follows:

{\displaystyle {\begin{aligned}S(x,y)&=\left({\frac {x}{x+1}},{\frac {y}{2}}\right),\\[5px]R(x,y)&=(1-x,1-y).\end{aligned}}}{\displaystyle {\begin{aligned}S(x,y)&=\left({\frac {x}{x+1}},{\frac {y}{2}}\right),\\[5px]R(x,y)&=(1-x,1-y).\end{aligned}}}
Visually, S shrinks the unit square to its bottom-left quarter, while R performs a point reflection through its center.

A point on the graph of ? has coordinates (x, ?(x)) for some x in the unit interval. Such a point is transformed by S and R into another point of the graph, because ? satisfies the following identities for all x ∈ [0, 1]:

{\displaystyle {\begin{aligned}\operatorname {?} \left({\frac {x}{x+1}}\right)&={\frac {\operatorname {?} (x)}{2}},\\[5px]\operatorname {?} (1-x)&=1-\operatorname {?} (x).\end{aligned}}}{\displaystyle {\begin{aligned}\operatorname {?} \left({\frac {x}{x+1}}\right)&={\frac {\operatorname {?} (x)}{2}},\\[5px]\operatorname {?} (1-x)&=1-\operatorname {?} (x).\end{aligned}}}
These two operators may be repeatedly combined, forming a monoid. A general element of the monoid is then

{\displaystyle S^{a_{1}}RS^{a_{2}}RS^{a_{3}}\cdots }{\displaystyle S^{a_{1}}RS^{a_{2}}RS^{a_{3}}\cdots }
for positive integers a1, a2, a3, …. Each such element describes a self-similarity of the question-mark function. This monoid is sometimes called the period-doubling monoid, and all period-doubling fractal curves have a self-symmetry described by it (the de Rham curve, of which the question mark is a special case, is a category of such curves). The elements of the monoid are in correspondence with the rationals, by means of the identification of a1, a2, a3, … with the continued fraction [0; a1, a2, a3,…]. Since both

{\displaystyle S:x\mapsto {\frac {x}{x+1}}}{\displaystyle S:x\mapsto {\frac {x}{x+1}}}
and
{\displaystyle T:x\mapsto 1-x}{\displaystyle T:x\mapsto 1-x}
are linear fractional transformations with integer coefficients, the monoid may be regarded as a subset of the modular group PSL(2, Z).
Quadratic irrationals
The question mark function provides a one-to-one mapping from the non-dyadic rationals to the quadratic irrationals, thus allowing an explicit proof of countability of the latter. These can, in fact, be understood to correspond to the periodic orbits for the dyadic transformation. This can be explicitly demonstrated in just a few steps.

Dyadic symmetry
Define two moves: a left move and a right move, valid on the unit interval {\displaystyle 0\leq x\leq 1}0\leq x\leq 1 as

{\displaystyle L_{D}(x)={\frac {x}{2}}}{\displaystyle L_{D}(x)={\frac {x}{2}}}
and {\displaystyle L_{C}(x)={\frac {x}{1+x}}}{\displaystyle L_{C}(x)={\frac {x}{1+x}}} and
{\displaystyle R_{D}(x)={\frac {1+x}{2}}}{\displaystyle R_{D}(x)={\frac {1+x}{2}}}
and {\displaystyle R_{C}(x)={\frac {1}{2-x}}}{\displaystyle R_{C}(x)={\frac {1}{2-x}}} The question mark function then obeys a left-move symmetry
{\displaystyle L_{D}\circ ?=?\circ L_{C}}{\displaystyle L_{D}\circ ?=?\circ L_{C}}
and a right-move symmetry
{\displaystyle R_{D}\circ ?=?\circ R_{C}}{\displaystyle R_{D}\circ ?=?\circ R_{C}}
where {\displaystyle \circ }\circ  denotes function composition. These can be arbitrary concatenated. Consider, for example, the sequence of left-right moves {\displaystyle LRLLR.}{\displaystyle LRLLR.} Adding the subscripts C and D, and, for clarity, dropping the composition operator {\displaystyle \circ }\circ  in all but a few places, one has:
{\displaystyle L_{D}R_{D}L_{D}L_{D}R_{D}\circ ?=?\circ L_{C}R_{C}L_{C}L_{C}R_{C}}{\displaystyle L_{D}R_{D}L_{D}L_{D}R_{D}\circ ?=?\circ L_{C}R_{C}L_{C}L_{C}R_{C}}
Arbitrary finite-length strings in the letters L and R correspond to the dyadic rationals, in that every dyadic rational can be written as both {\displaystyle y=n/2^{m}}{\displaystyle y=n/2^{m}} for integer n and m and as finite length of bits {\displaystyle y=0.b_{1}b_{2}b_{3}\cdots b_{m}}{\displaystyle y=0.b_{1}b_{2}b_{3}\cdots b_{m}} with {\displaystyle b_{k}\in \{0,1\}.}{\displaystyle b_{k}\in \{0,1\}.} Thus, every dyadic rational is in one-to-one correspondence with some self-symmetry of the question mark function.
Some notational rearrangements can make the above slightly easier to express. Let {\displaystyle g_{0}}g_{0} and {\displaystyle g_{1}}g_{1} stand for L and R. Function composition extends this to a monoid, in that one can write {\displaystyle g_{010}=g_{0}g_{1}g_{0}}{\displaystyle g_{010}=g_{0}g_{1}g_{0}} and generally, {\displaystyle g_{A}g_{B}=g_{AB}}{\displaystyle g_{A}g_{B}=g_{AB}} for some binary strings of digits A, B, where AB is just the ordinary concatenation of such strings. The dyadic monoid M is then the monoid of all such finite-length left-right moves. Writing {\displaystyle \gamma \in M}{\displaystyle \gamma \in M} as a general element of the monoid, there is a corresponding self-symmetry of the question mark function:

{\displaystyle \gamma _{D}\circ ?=?\circ \gamma _{C}}{\displaystyle \gamma _{D}\circ ?=?\circ \gamma _{C}}
Isomorphism
An explicit mapping between the rationals and the dyadic rationals can be obtained providing a reflection operator

{\displaystyle r(x)=1-x}{\displaystyle r(x)=1-x}
and noting that both
{\displaystyle r\circ R_{D}\circ r=L_{D}}{\displaystyle r\circ R_{D}\circ r=L_{D}}
and {\displaystyle r\circ R_{C}\circ r=L_{C}}{\displaystyle r\circ R_{C}\circ r=L_{C}} Since {\displaystyle r^{2}=1}{\displaystyle r^{2}=1} is the identity, an arbitrary string of left-right moves can be re-written as a string of left moves only, followed by a reflection, followed by more left moves, a reflection, and so on, that is, as {\displaystyle L^{a_{1}}rL^{a_{2}}rL^{a_{3}}\cdots }{\displaystyle L^{a_{1}}rL^{a_{2}}rL^{a_{3}}\cdots } which is clearly isomorphic to {\displaystyle S^{a_{1}}TS^{a_{2}}TS^{a_{3}}\cdots }{\displaystyle S^{a_{1}}TS^{a_{2}}TS^{a_{3}}\cdots } from above. Evaluating some explicit sequence of {\displaystyle L_{D},R_{D}}{\displaystyle L_{D},R_{D}} at the function argument {\displaystyle x=1}x=1 gives a dyadic rational; explicitly, it is equal to {\displaystyle y=0.b_{1}b_{2}b_{3}\cdots b_{m}}{\displaystyle y=0.b_{1}b_{2}b_{3}\cdots b_{m}} where each {\displaystyle b_{k}\in \{0,1\}}{\displaystyle b_{k}\in \{0,1\}} is a binary bit, zero corresponding to a left move and one corresponding to a right move. The equivalent sequence of {\displaystyle L_{C},R_{C}}{\displaystyle L_{C},R_{C}} moves, evaluated at {\displaystyle x=1}x=1 gives a rational number {\displaystyle p/q.}{\displaystyle p/q.} It is explicitly the one provided by the continued fraction {\displaystyle p/q=[a_{1},a_{2},a_{3},\cdots ,a_{j}]}{\displaystyle p/q=[a_{1},a_{2},a_{3},\cdots ,a_{j}]} keeping in mind that it is a rational because the sequence {\displaystyle (a_{1},a_{2},a_{3},\cdots ,a_{j})}{\displaystyle (a_{1},a_{2},a_{3},\cdots ,a_{j})} was of finite length. This establishes a one-to-one correspondence between the dyadic rationals and the rationals.
Periodic orbits of the dyadic transform
Consider now the periodic orbits of the dyadic transformation. These correspond to bit-sequences consisting of a finite initial "chaotic" sequence of bits {\displaystyle b_{0},b_{1},b_{2},\cdots ,b_{k-1}}{\displaystyle b_{0},b_{1},b_{2},\cdots ,b_{k-1}}, followed by a repeating string {\displaystyle b_{k},b_{k+1},b_{k+2},\cdots ,b_{k+m-1}}{\displaystyle b_{k},b_{k+1},b_{k+2},\cdots ,b_{k+m-1}} of length {\displaystyle m}m. Such repeating strings correspond to a rational number. This is easily made explicit. Write

{\displaystyle y=\sum _{j=0}^{m-1}b_{k+j}2^{-j-1}}{\displaystyle y=\sum _{j=0}^{m-1}b_{k+j}2^{-j-1}}
one then clearly has
{\displaystyle \sum _{j=0}^{\infty }b_{k+j}2^{-j-1}=y\sum _{j=0}^{\infty }2^{-jm}={\frac {y}{1-2^{m}}}}{\displaystyle \sum _{j=0}^{\infty }b_{k+j}2^{-j-1}=y\sum _{j=0}^{\infty }2^{-jm}={\frac {y}{1-2^{m}}}}
Tacking on the initial non-repeating sequence, one clearly has a rational number. In fact, every rational number can be expressed in this way: an initial "random" sequence, followed by a cycling repeat. That is, the periodic orbits of the map are in one-to-one correspondence with the rationals.
Periodic orbits as continued fractions
Such periodic orbits have an equivalent periodic continued fraction, per the isomorphism established above. There is an initial "chaotic" orbit, of some finite length, followed by the a repeating sequence. The repeating sequence generates a periodic continued fraction satisfying {\displaystyle x=[a_{n},a_{n+1},a_{n+2},\cdots ,a_{n+r},x].}{\displaystyle x=[a_{n},a_{n+1},a_{n+2},\cdots ,a_{n+r},x].} This continued fraction has the form[5]

{\displaystyle x={\frac {\alpha x+\beta }{\gamma x+\delta }}}{\displaystyle x={\frac {\alpha x+\beta }{\gamma x+\delta }}}
with the {\displaystyle \alpha ,\beta ,\gamma ,\delta }\alpha ,\beta ,\gamma ,\delta  being integers, and satisfying {\displaystyle \alpha \delta -\beta \gamma =\pm 1.}{\displaystyle \alpha \delta -\beta \gamma =\pm 1.} Explicit values can be obtained by writing
{\displaystyle S\mapsto {\begin{pmatrix}1&0\\1&1\end{pmatrix}}}{\displaystyle S\mapsto {\begin{pmatrix}1&0\\1&1\end{pmatrix}}}
for the shift, so that
{\displaystyle S^{n}\mapsto {\begin{pmatrix}1&0\\n&1\end{pmatrix}}}{\displaystyle S^{n}\mapsto {\begin{pmatrix}1&0\\n&1\end{pmatrix}}}
while the reflection is given by
{\displaystyle T\mapsto {\begin{pmatrix}-1&1\\0&1\end{pmatrix}}}{\displaystyle T\mapsto {\begin{pmatrix}-1&1\\0&1\end{pmatrix}}}
so that {\displaystyle T^{2}=I}T^{2}=I. Both of these matrices are unimodular, arbitrary products remain unimodular, and result in a matrix of the form
{\displaystyle S^{a_{n}}TS^{a_{n+1}}T\cdots TS^{a_{n+r}}={\begin{pmatrix}\alpha &\beta \\\gamma &\delta \end{pmatrix}}}{\displaystyle S^{a_{n}}TS^{a_{n+1}}T\cdots TS^{a_{n+r}}={\begin{pmatrix}\alpha &\beta \\\gamma &\delta \end{pmatrix}}}
giving the precise value of the continued fraction. As all of the matrix entries are integers, this matrix belongs to the projective modular group {\displaystyle PSL(2,\mathbb {Z} ).}{\displaystyle PSL(2,\mathbb {Z} ).}
Solving explicitly, one has that {\displaystyle \gamma x^{2}+(\delta -\alpha )x-\beta =0.}{\displaystyle \gamma x^{2}+(\delta -\alpha )x-\beta =0.} It is not hard to verify that the solutions to this meet the definition of quadratic irrationals. In fact, every quadratic irrational can be expressed in this way. Thus the quadratic irrationals are in one-to-one correspondence with the periodic orbits of the dyadic transform, which are in one-to-one correspondence with the (non-dyadic) rationals, which are in one-to-one correspondence with the dyadic rationals. The question mark function provides the correspondence in each case.

Properties of ?(x)
?(x) − x
The question-mark function is a strictly increasing and continuous,[6] but not absolutely continuous function. The derivative is defined almost everywhere, and can take on only two values, 0 (its value almost everywhere, including at all rational numbers) and {\displaystyle +\infty }+\infty .[7] There are several constructions for a measure that, when integrated, yields the question-mark function. One such construction is obtained by measuring the density of the Farey numbers on the real number line. The question-mark measure is the prototypical example of what are sometimes referred to as multi-fractal measures.

The question-mark function maps rational numbers to dyadic rational numbers, meaning those whose base two representation terminates, as may be proven by induction from the recursive construction outlined above. It maps quadratic irrationals to non-dyadic rational numbers. In both cases it provides an order isomorphism between these sets,[8] making concrete Cantor's isomorphism theorem according to which every two unbounded countable dense linear orders are order-isomorphic.[9] It is an odd function, and satisfies the functional equation ?(x + 1) = ?(x) + 1; consequently x → ?(x) − x is an odd periodic function with period one. If ?(x) is irrational, then x is either algebraic of degree greater than two, or transcendental.

The question-mark function has fixed points at 0, 
1
/
2
 and 1, and at least two more, symmetric about the midpoint. One is approximately 0.42037.[6] It was conjectured by Moshchevitin that they were the only 5 fixed points.[10]

In 1943, Raphaël Salem raised the question of whether the Fourier–Stieltjes coefficients of the question-mark function vanish at infinity.[11] In other words, he wanted to know whether or not

{\displaystyle \lim _{n\to \infty }\int _{0}^{1}e^{2\pi inx}\,\operatorname {d?} (x)=0.}{\displaystyle \lim _{n\to \infty }\int _{0}^{1}e^{2\pi inx}\,\operatorname {d?} (x)=0.}
This was answered affirmatively by Jordan and Sahlsten, as a special case of a result on Gibbs measures.[12]

The graph of Minkowski question mark function is a special case of fractal curves known as de Rham curves.
